@page "/{userId}/Class/{classId}"


@if (!string.IsNullOrWhiteSpace(ClassId))
{
	<h1 class="text-center">@ClassId</h1>
}
else
{
	<p>No class selected.</p>
}

@if (isStudent)
{
	<div class="mt-3">
		<h3 class="text-center">Assignments</h3>
		<!-- Temporary hardcoded assignment list items -->
		<div class="d-flex flex-column align-items-center">
			<AssignmentListItem AssignmentName="Intro Worksheet" GradedFileName="intro_worksheet.pdf"
				DetailPageUrl="@($"/{UserId}/Class/{ClassId}/assignment/assignmentId1")" />

			<AssignmentListItem AssignmentName="Reading Quiz 1" GradedFileName="quiz1_results.pdf"
				DetailPageUrl="@($"/{UserId}/Class/{ClassId}/assignment/assignmentId2")" />

			<AssignmentListItem AssignmentName="Project Proposal" GradedFileName="proposal.docx"
				DetailPageUrl="@($"/{UserId}/Class/{ClassId}/assignment/a005")" />
		</div>
	</div>
}
else
{

       <h3 class="text-center">Students</h3>

        @if (StudentsInClass is not null && StudentsInClass.Count > 0)
        {
            <div class="d-flex flex-wrap justify-content-center gap-3 mb-4">
                @foreach (var s in StudentsInClass)
                {
                    var initials = (s.DisplayName ?? s.Username ?? "U")[0].ToString().ToUpperInvariant();
                    var profileUrl = $"/{UserId}/Class/{ClassId}/Student/{s.Id}";

                    <UserProfileCard
                        TargetUserId="@s.Id"
                        ClassId="@ClassId"
                        UserId="@UserId"

                        UserName="@(s.DisplayName ?? s.Username ?? "Unknown")"
                        UserTitle="Student"
                        ProfileImageUrl="@($"https://via.placeholder.com/90/F7C59F/004E89?text={initials}")"
                        ProfileDetailPageUrl="@profileUrl"
                        UserPhoneNumber="@string.Empty"

                        OnViewProfile="@OnStudentViewProfile" />
                }
            </div>
        }
        else
        {
            <p class="text-center text-muted">No students enrolled yet.</p>
        }
}

@* A single modal instance at page level *@
<ProfileModal @ref="profileModalRef" UserName="@SelectedUserName" ProfilePictureUrl="@SelectedProfileImageUrl"
	UserInterests="@SelectedUserInterests" Title="@SelectedTitle" EnableEditButton="false" />